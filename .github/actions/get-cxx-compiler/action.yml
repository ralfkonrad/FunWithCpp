name:
  get-cmake_cxx_compiler-variable
description:
  Gets the CC and CXX environment variables.

inputs:
  compiler:
    description: The compiler to use.
    required: true

  compiler-version:
    description: The compiler version to use.
    required: false

outputs:
  cc:
    description: The c compiler
    value: ${{ steps.determine-compiler-variable.outputs.cc }}

  cxx:
    description: The c++ compiler
    value: ${{ steps.determine-compiler-variable.outputs.cxx }}

runs:
  using: composite
  steps:
    - name: determine-compiler-variable
      shell: bash
      run: |
        if [ "${{ inputs.compiler }}" = "clang" ]
        then
          echo using clang
          echo "cc=clang-${{ inputs.compiler-version }}"      >> $GITHUB_OUTPUT
          echo "cxx=clang++-${{ inputs.compiler-version }}"   >> $GITHUB_OUTPUT
        elif [ "${{ inputs.compiler }}" = "gcc" ]
        then
          echo using gcc
          echo "cc=gcc-${{ inputs.compiler-version }}"        >> $GITHUB_OUTPUT
          echo "cxx=g++-${{ inputs.compiler-version }}"       >> $GITHUB_OUTPUT
        elif [ "${{ inputs.compiler }}" = "msvc" ]
        then
          echo using cl
          echo "cc=cl"                                        >> $GITHUB_OUTPUT
          echo "cxx=cl"                                       >> $GITHUB_OUTPUT
        else
          echo Unknown compiler given: '${{ inputs.compiler }}'
          exit 1
        fi
        echo $GITHUB_OUTPUT

